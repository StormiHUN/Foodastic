<script>

    let t = [
        {
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "kajtossifli",
            ar : 800
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        },{
            id : "sk",
            image : "https://tinyurl.com/mpvces9x",
            name : "sajtoskifli",
            ar : 1000
        }
    ]

    async function kepSwitch(item, id){
        console.log(id)
        if(document.getElementById(id).children.length > 1){
            document.getElementById(id).innerHTML = '<img class="rounded-lg min-w-[240px] max-w-[240px] min-h-[360px] max-h-[3600px] mx-auto"  src='+item.image+' alt="placeholder">'
            return
        }
        document.getElementById(id).innerHTML = "<p>l√≥fasz</p><p></p>"
    }

    let cart = []

    function getCartIndex(item){
        for(let i = 0; i < cart.length; i++){
            if(cart[i].item.name == item.name){
                return i
            }
        }
        return -1
    }

    function addToCard(item){
        if(cart.length == 0){
            cart.push({item : item, db : 1})
        }else{
            if(getCartIndex(item) == -1){
                cart.push({item : item, db : 1})
            }else{
                cart[getCartIndex(item)].db++
            }
        }
        writeCart()
    }

    function writeCart(){
        return
        if(cart.length == 0){
            document.getElementById("displayCart").innerHTML = "Your cart is empty"
        }else{
            let html = ""
            for(let i = 0; i < cart.length; i++){
                html += "<div class='flex gap-2'>"
                    html += cart[i].item.name + "(" + cart[i].db + ") - " + cart[i].item.ar*cart[i].db + " Ft"
                    html += "<button on:click={() => deleteFromCart()}>"
                        html += "<img src='delete.svg'>"
                    html += "</button>"
                html += "</div>"
            }
            document.getElementById("displayCart").innerHTML = html
        }
    }

    function deleteFromCart(index){
        console.log(cart)
        if(cart[index].db -1 == 0){
            cart.splice(index,1)
        }else{
            cart[index].db--
        }
        writeCart()
    }

</script>
<main>
    <div id="displayCart" class="p-4">
        {#each cart as item, index}
            <div class="flex gap-2">
                <div>
                    {item.item.name} ({item.db}) - {item.item.ar*item.db} Ft
                </div>
                <button on:click={() => deleteFromCart(index)}>
                    <img src="delete.svg">
                </button>
            </div>
        {/each}
    </div>
    <div class="grid grid-cols-7 p-4 gap-4">
        {#each t as item, index}
            <div class="flex flex-col gap-2 bg-[#F5ECD5] border-[#3D3D3D] border-2 p-2 w-fit rounded-lg hover:bg-[#d9ccab] transition-all">
                <div id={"item"+index} on:click={() => kepSwitch(item, "item"+index)} class="min-w-[240px] max-w-[240px] min-h-[360px] max-h-[3600px] mx-auto transition-all">
                    <img class="rounded-lg min-w-[240px] max-w-[240px] min-h-[360px] max-h-[3600px] mx-auto"  src={item.image} alt="placeholder">
                </div>
                <div class="flex justify-between">
                    <div>
                        <p class="">{item.name}</p>
                        <p class="text-sm">{item.ar} Ft</p>
                    </div>
                    <button class="hover:bg-[#F6ECD6] hover:rounded-lg p-2 transition-all" on:click={() => addToCard(item)}>
                        <img src="/addshoppingcart.svg" alt="cart">
                    </button>
                </div>
            </div>
        {/each}
    </div>
</main>